# 01. 객체, 설계

### 1. 티켓 판매 애플리케이션 구현하기

추첨을 통해 선정된 관람객에게 무료로 관람할 수 있는 초대장 발송

- 이벤트에 당첨된 관람객은 초대장을 티켓으로 교환한 후 입장
- 이벤트에 당첨되지 않은 관람객은 티켓을 구매한 후 입장

### 2. 무엇이 문제인가

로버트 마틴의 <클린 소프트웨어>에서 소프트웨어 모듈이 가져야 하는 세 가지 기능에 관해 설명한다.  
모듈이란 크기와 상관 없이 클래스나 패키지, 라이브러리와 같이 프로그램을 구성하는 임의의 요소를 의미한다.

1. 제대로 실행되어야 한다.
2. 변경이 용이해야 한다.
3. 이해하기 쉬워야 한다.

1장의 1까지의 코드는 1번은 만족하지만 2, 3번은 만족시키지 못한다.

#### 예상을 빗나가는 코드

##### 관람객과 판매원이 소극장의 통제를 받는 수동적인 존재로 표현되어 있다.

- 관람객이 직접 자신의 가방에서 돈을 직접 꺼내 판매원에게 지불한다.
- 판매원은 매표소에 있는 티켓을 직접 꺼내 관람객에게 건내고 관람객에게 직접 돈을 받아 매표소에 보관한다.  

##### 코드를 이해하기 위해서 여러가지 세부적인 내용들을 한꺼번에 기억하고 있어야 한다.

- `Theater`의 enter 메소드를 이해하기 위해서는 Audience가 Bag을 가지고 있고, Bag 안에는 현금과 티켓이 들어있으며 TicketSeller가 TicketOffice에서 티켓을 판매하고, TicketOffice 안에 돈과 티켓이 보관되어 있다는 모든 사실을 동시에 기억하고 있어야 한다.
- 하나의 클래스나 메소드에서 너무 많은 세부사항을 다루기 때문에 작성하는 사람 뿐 아니라 읽고 이해해야 하는 사람 모두에게 큰 부담을 준다.
- 가장 심각한 문제는 Audience와 TicketSeller를 변경할 경우 `Theater`도 함께 변경해야 한다.

#### 변경에 취약한 코드

##### 객체 사이의 의존성(`dependency`)의 문제

- 어떤 객체가 변경될 때 그 객체에게 의존하는 다른 객체도 함께 변경될 수 있다.  
- 애플리케이션의 기능을 구현하는 데 필요한 최소한의 의존성만 유지하고 불필요한 의존성을 제거하자  
- 객체 사이의 의존성이 과한 경우 결합도(`coupling`)가 높다고 한다.
- 객체 사이의 결합도를 낮춰 변경이 용이한 설계를 만들어야 한다.

### 3. 설계 개선하기

관람객과 판매원이 자신의 일을 스스로 처리해야 한다.  
`Theater`가 Audience와 TicketSeller에 관해 너무 세세한 부분까지 알지 못하도록 정보를 차단한다.
- 관람객이 가방을 가지고 있다는 사실과 판매원이 매표소에서 티켓을 판매한다는 사실을 Theater가 알아야 할 필요가 없다.
- 관람객과 판매원을 자율적인 존재로 만들자

#### 자율성을 높이자

